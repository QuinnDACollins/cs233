.data

len1: .word 4
array1: .word 1, 2, 3, 4

len2: .word 4
array2: .word 4, 3, 2, 1

len3: .word 1
array3: .word 42

len4: .word 10
array4: .word 1, 1, 1, 10, 1, 1, 1, 1, 1, 1


map:    .word 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0
        .word 0, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46
        .word 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0
        .word 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 1, 0, 46, 1, 0, 46, 0
        .word 0, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 1, 46
        .word 1, 0, 46, 1, 0, 46, 0, 1, 46, 0, 0, 46, 0, 0, 46, 0, 1, 46, 1, 0
        .word 46, 1, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0
        .word 0, 46, 0, 1, 46, 0, 0, 46, 0, 0, 46, 0, 1, 46, 0, 0, 46, 0, 0, 46
        .word 0, 1, 46, 1, 0, 46, 1, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0
        .word 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0
        .word 0, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46
        .word 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0
        .word 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0
        .word 0, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46
        .word 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0
        .word 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0
        .word 0, 46, 0, 1, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46
        .word 0, 1, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0
        .word 46, 0, 0, 46, 0, 0, 46, 0, 1, 46, 1, 0, 46, 1, 0, 46, 0, 0, 46, 0
        .word 0, 46, 0, 0, 46, 0, 1, 46, 1, 0, 46, 1, 0, 46, 0, 0, 46, 0, 0, 46
        .word 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0
        .word 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0
        .word 0, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46
        .word 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0
        .word 46, 0, 0, 46, -1, -1, 46, -1, 1, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46
        .word 0, 0, 46, 0, 0, 46, 1, 0, 46, 1, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0
        .word 46, 0, 0, 46, 0, 0, 46, -1, -1, 46, -1, 1, 46, -1, -1, 46, -1, 1
        .word 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 1, 46, 0, 0, 46, 0, 0, 46, 0
        .word 1, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, -1, 1, 46, -1, -1
        .word 46, -1, 1, 46, -1, -1, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 1, 46
        .word 1, 0, 46, 1, 0, 46, 0, 1, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0
        .word 46, 0, 0, 46, -1, 1, 46, -1, -1, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46
        .word 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0
        .word 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0, 0, 46, 0
        .word 0

.text

.globl compare

compare:
    sub     $t0, $a0, -1
    sub     $t1, $a1, -1
    mul     $t2, $t0, $a0   # lhs * (lhs - 1)
    mul     $t3, $t1, $a1   # rhs * (rhs - 1)
    blt     $t2, $t3, less_than
    li      $v0, 0
    jr      $ra

less_than:
    li      $v0, 1
    jr      $ra



print_array:
    li      $t0, 0          # Loop index
    move    $t1, $a0        # Array pointer
    move    $t2, $a1        # Array length

print_array_loop:
    bge     $t0, $t2, print_array_loop_end

    # Print current int
    li      $v0, 1
    lw      $a0, ($t1)
    syscall
    li      $v0, 11
    li      $a0, ' '
    syscall

    add     $t1, $t1, 4     # Next int
    add     $t0, $t0, 1     # Next index

    j       print_array_loop

print_array_loop_end:
    li      $v0, 11
    li      $a0, '\n'
    syscall
    jr      $ra



sort_test_cases:
    sub     $sp, $sp, 4
    sw      $ra, 0($sp)

    ### TESTCASE 1 ###

    la      $a0, array1
    la      $a1, len1
    lw      $a1, ($a1)
    jal     selection_sort

    # Expected:  1 2 3 4
    la      $a0, array1
    la      $a1, len1
    lw      $a1, ($a1)
    jal     print_array

    ### TESTCASE 2 ###

    la      $a0, array2
    la      $a1, len2
    lw      $a1, ($a1)
    jal     selection_sort

    # Expected:  1 2 3 4
    la      $a0, array2
    la      $a1, len2
    lw      $a1, ($a1)
    jal     print_array

    ### TESTCASE 3 ###

    la      $a0, array3
    la      $a1, len3
    lw      $a1, ($a1)
    jal     selection_sort

    # Expected:  42
    la      $a0, array3
    la      $a1, len3
    lw      $a1, ($a1)
    jal     print_array

    ### TESTCASE 4 ###

    la      $a0, array4
    la      $a1, len4
    lw      $a1, ($a1)
    jal     selection_sort

    # Expected:  1 1 1 1 1 1 1 1 1 10
    la      $a0, array4
    la      $a1, len4
    lw      $a1, ($a1)
    jal     print_array

    lw      $ra, 0($sp)
    add     $sp, $sp, 4
    jr      $ra

.data


.text

print_map:
    li      $t0, 0          # Loop index
    move    $t1, $a0        # Array pointer
    li      $t2, 0          # Line index

print_map_loop:
    bge     $t0, 225, print_map_loop_end

    # Print current char
    li      $v0, 11
    lb      $a0, ($t1)
    syscall

    add     $t1, $t1, 12    # The next char (in the next Gradient)
    add     $t0, $t0, 1     # Next index
    add     $t2, $t2, 1     # Next line index

    # Print newline if needed
    bne     $t2, 15, print_map_loop
    li      $v0, 11
    li      $a0, '\n'
    syscall
    li      $t2, 0          # Reset line index
    j       print_map_loop

print_map_loop_end:
    li      $v0, 11
    li      $a0, '\n'
    syscall

    jr      $ra



gradient_test_case:
    sub     $sp, $sp, 4
    sw  $ra, 0($sp)

    ## TESTCASE (only one)

    la      $a0, map
    jal     draw_gradient

    # Print returned result
    # Expected: 42
    move    $a0, $v0
    li      $v0, 1
    syscall
    li      $a0, '\n'
    li      $v0, 11
    syscall

    # Print gradient map
    # Expected:
    # ...............
    # .........__....
    # ..|__|..|__....
    # ..|..|..|__....
    # ...............
    # ...............
    # ...............
    # ..|.....|......
    # ..|__...|__....
    # ...............
    # .........../\..
    # ...__...../\/\.
    # ..|..|....\/\/.
    # ..|__|.....\/..
    # ...............
    la      $a0, map
    jal     print_map

    lw      $ra, 0($sp)
    add     $sp, $sp, 4
    jr      $ra

main:
    sub     $sp, $sp, 4
    sw      $ra, 0($sp)

    jal     sort_test_cases
    jal     gradient_test_case

    lw      $ra, 0($sp)
    add     $sp, $sp, 4

    jr      $ra